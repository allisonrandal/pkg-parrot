# DO NOT EDIT THIS FILE
# Generated by Parrot::Configure::Step from languages/pugs/config/makefiles/root.in

RM_F    = $(PERL) -MExtUtils::Command -e rm_f
PERL    = /usr/bin/perl
PARROT  = ../../parrot
PBC_MERGE = ../../pbc_merge

LIBPATH  = lib
BUILD   = $(PERL) /home/rafl/projects/debian/packages/parrot/0.4.3/parrot-0.4.3/tools/build/dynpmc.pl
DESTDIR = /home/rafl/projects/debian/packages/parrot/0.4.3/parrot-0.4.3/runtime/parrot/dynext
O       = .o
CLASSDIR = pmc
LOAD_EXT = .so

PMCS = \
    pugsany \
    pugsbit \
    pugsbool \
    pugscode \
    pugsint \
    pugsmapping \
    pugsnum \
    pugsmodule \
    pugsstr \
    pugstuple \
    pugsundef

PBCS =

all: pmcs $(PBCS)

pmcs:
	@cd $(CLASSDIR) && $(BUILD) generate $(PMCS)
	@cd $(CLASSDIR) && $(BUILD) compile $(PMCS)
	@cd $(CLASSDIR) && $(BUILD) linklibs $(PMCS)
	@cd $(CLASSDIR) && $(BUILD) copy "--destination=$(DESTDIR)" $(PMCS)

test:   all
	cd .. && $(PERL) -I../lib -Ipugs/t pugs/t/harness

CLEANERS = \
"t/lib/*.pir" \
"t/pmc/*.pir" \
"t/*.pir" \
"t/*.p6" \
"t/*.orig_out" \
"t/*.parrot_out" \
"$(CLASSDIR)/*.dump" \
"$(CLASSDIR)/*.c" \
"$(CLASSDIR)/*.h" \
"$(CLASSDIR)/*$(LOAD_EXT)" \
"$(CLASSDIR)/*$(O)" \
"$(LIBPATH)/*.pbc"

clean:
	$(RM_F) $(CLEANERS)

distclean: clean
	$(RM_F) Makefile
