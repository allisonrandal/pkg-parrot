# DO NOT EDIT THIS FILE
# Generated by Parrot::Configure::Step from languages/APL/config/root.in

# Setup some commands
LN_S     = /bin/ln -s
PERL     = /usr/bin/perl
RM_F     = $(PERL) -MExtUtils::Command -e rm_f
PARROT   = ../../parrot
PGE_DIR  = ../../compilers/pge
CP       = $(PERL) -MExtUtils::Command -e cp

GENERATED = lib/generated_APL_grammar.pir


.SUFFIXES : .pir .pbc

.pir.pbc :
	$(PARROT) -o $@ $<

# the default target
all: $(PARROT) \
  APL.pbc \
  lib/PAST.pbc \
  lib/POST.pbc \
  lib/APLGrammar.pbc \
  lib/APLOpLookup.pbc

$(GENERATED): lib/APL.g
	$(PARROT) $(PGE_DIR)/rulec.pir --encoding=utf8 --compiler=p6rules --output=$(GENERATED) lib/APL.g 

lib/APLGrammar.pbc: $(GENERATED)

APL.pbc: 

lib/PAST.pbc: \
  lib/PAST/Code.pbc  \
  lib/PAST/Exp.pbc   \
  lib/PAST/Node.pbc  \
  lib/PAST/Op.pbc    \
  lib/PAST/Stmt.pbc  \
  lib/PAST/Stmts.pbc \
  lib/PAST/Sub.pbc   \
  lib/PAST/Val.pbc   \
  lib/PAST/Var.pbc

lib/POST.pbc: \
  lib/POST/Node.pbc  \
  lib/POST/Op.pbc    \
  lib/POST/Ops.pbc   \
  lib/POST/Sub.pbc   \
  lib/POST/Val.pbc   \
  lib/POST/Var.pbc

# This is a listing of all targets, that are meant to be called by users
help:
	@echo ""
	@echo "Following targets are available for the user:"
	@echo ""
	@echo "  all:               APL.pbc"
	@echo "                     This is the default."
	@echo "Testing:"
	@echo "  test:              Run the test suite."
	@echo "  testclean:         Clean up test results."
	@echo ""
	@echo "Cleaning:"
	@echo "  clean:             Basic cleaning up."
	@echo "  realclean:         Removes also files generated by 'Configure.pl'"
	@echo "  distclean:         Removes also anything built, in theory"
	@echo ""
	@echo "Misc:"
	@echo "  help:              Print this help message."
	@echo ""

test: all
	$(PERL) -Ilib t/harness t/*.t

testclean:
	$(RM_F) "t/*.apl" "t/*.out"

clean: testclean
	$(RM_F) \
  APL.pbc \
  $(GENERATED) \
  "lib/*.pbc" \
  "lib/PAST/*.pbc" \
  "lib/POST/*.pbc"

realclean: clean
	$(RM_F) Makefile

distclean: realclean
